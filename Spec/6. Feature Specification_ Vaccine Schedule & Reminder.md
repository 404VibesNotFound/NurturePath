<img src="https://r2cdn.perplexity.ai/pplx-full-logo-primary-dark%402x.png" style="height:64px;margin-right:32px"/>

# Feature Specification: Vaccine Schedule \& Reminders

## User Story

**As a** Patient (expecting mother),
**I want to** receive automated reminders with vaccine due dates based on Sri Lanka’s Expanded Programme on Immunization (EPI) schedule,
**so that** I can ensure my child receives timely vaccinations and avoid delays that could compromise health.

**As a** Provider (midwife),
**I want to** track each patient’s vaccination schedule automatically and send timely reminders,
**so that** I can improve vaccination coverage, reduce missed doses, and improve community health outcomes.

**As a** Family Member,
**I want to** be notified about upcoming vaccination appointments for the child,
**so that** I can assist and ensure compliance with immunization schedules.

## Feature Description

This feature automatically calculates due dates for vaccines based on the national EPI schedule of Sri Lanka, which includes vaccines such as BCG at birth, DTP, OPV, Hepatitis B, Hib at specific months, and others up to school age. It stores each patient’s vaccination history, computes upcoming due vaccines and sends personalized multi-channel reminders (SMS, email, app push). The system supports rescheduling due to missed doses, tracks vaccine completion, and provides healthcare providers with dashboards showing vaccination status to prioritize outreach to defaulters. The EPI schedule is configurable to allow for updates and additional vaccines.

Key capabilities:

- Automated computing of vaccine due dates from birth and prior vaccine dates
- Dynamic reminder scheduling via preferred channels at configurable intervals (e.g., 1 week, 3 days before due date)
- Overview dashboard for providers to track patient vaccination compliance
- Patient and family notifications and health education linked to each vaccine
- Support vaccine rescheduling and catch-up doses per EPI guidelines
- Audit trail of reminders sent and vaccine administration records
- Configurable EPI schedule for updates by health authorities
- Integration with appointment scheduling and health record modules
- Multi-language support (including Sinhala, Tamil, English)
- Ensure privacy and security for patient health data


## Acceptance Criteria

### Given–When–Then Scenarios

**Scenario 1: Automatic due date calculation for vaccines**

- **Given** a child’s date of birth and vaccination history
- **When** vaccines are recorded as administered
- **Then** the system calculates the next vaccine due date according to Sri Lanka’s EPI schedule
- **And** updates the patient’s vaccination schedule accordingly

**Scenario 2: Reminder notifications sent to patient and family**

- **Given** an upcoming vaccine due date
- **When** the configured reminder interval (e.g., 7 days before) is reached
- **Then** reminders are sent via SMS, email, and mobile push notifications
- **And** the system records reminder history including failures or retries

**Scenario 3: Provider dashboard shows vaccination compliance status**

- **Given** a provider logs into the system
- **When** they access the vaccination tracking dashboard
- **Then** a list of patients with upcoming, overdue, or missed vaccines is displayed
- **And** actionable insights for follow-up outreach are highlighted

**Scenario 4: Patient requests vaccine rescheduling**

- **Given** a patient has missed a scheduled vaccine
- **When** they request rescheduling through the app or via midwife
- **Then** the system adjusts due dates and reminder schedules following catch-up immunization protocols
- **And** notifications about revised schedule are sent


### Bullet Point Criteria

- EPI national vaccination schedule must be configurable and updatable
- Vaccine due dates computed from date of birth and prior vaccine administrations
- Multi-channel reminder system with retry and failure tracking
- Integration with appointment scheduler to link vaccine visits
- Support for parent/caregiver notification and consent tracking
- Provider dashboard with compliance metrics and patient risk stratification
- Data privacy with encrypted personal health information
- Localization support for Sri Lanka’s official languages
- Robust error handling for invalid vaccine data or communication failures

***

## Complete Specification for Coding Agent

### Implementation Requirements

**Technology Stack:**

- Frontend: ReactJS with notification UI components
- Backend: .NET Core 8 WebAPI with scheduling and notification services
- Database: PostgreSQL with date calculations and logging
- Notification: Use Twilio, SendGrid, and Firebase for SMS, email, and push notifications
- Localization libraries for multi-language support


### Database Schema (JSON Format)

```json
{
  "VaccineSchedule": {
    "Id": "integer (PK)",
    "VaccineName": "string (e.g., DTP, BCG)",
    "DoseNumber": "integer",
    "RecommendedAgeWeeks": "integer (age from birth when vaccine is due in weeks)",
    "CatchUpWindowWeeks": "integer (max weeks delay for catch-up, nullable)",
    "IsBooster": "boolean (default: false)",
    "Description": "string",
    "CreatedAt": "datetime",
    "UpdatedAt": "datetime"
  },
  "PatientVaccineRecord": {
    "Id": "integer (PK)",
    "PatientId": "integer (FK -> User.Id)",
    "VaccineScheduleId": "integer (FK -> VaccineSchedule.Id)",
    "AdministrationDate": "date (nullable if not yet administered)",
    "Status": "string (Due, Completed, Missed, Rescheduled)",
    "DueDate": "date",
    "RescheduledDate": "date (nullable)",
    "ReminderSent": "boolean (default: false)",
    "CreatedAt": "datetime",
    "UpdatedAt": "datetime"
  },
  "VaccineReminderLog": {
    "Id": "integer (PK)",
    "PatientVaccineRecordId": "integer (FK -> PatientVaccineRecord.Id)",
    "ReminderType": "string (SMS, Email, Push)",
    "SentAt": "datetime",
    "Status": "string (Sent, Failed)",
    "RetryCount": "integer",
    "ErrorMessage": "string (nullable)"
  }
}
```


### .NET Core Model Classes

```csharp
public class VaccineSchedule
{
    public int Id { get; set; }
    public string VaccineName { get; set; } = string.Empty;
    public int DoseNumber { get; set; }
    public int RecommendedAgeWeeks { get; set; }
    public int? CatchUpWindowWeeks { get; set; }
    public bool IsBooster { get; set; } = false;
    public string? Description { get; set; }
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }
}

public class PatientVaccineRecord
{
    public int Id { get; set; }
    public int PatientId { get; set; }
    public int VaccineScheduleId { get; set; }
    public DateTime? AdministrationDate { get; set; }
    public string Status { get; set; } = "Due"; // Due, Completed, Missed, Rescheduled
    public DateTime DueDate { get; set; }
    public DateTime? RescheduledDate { get; set; }
    public bool ReminderSent { get; set; } = false;
    public DateTime CreatedAt { get; set; }
    public DateTime UpdatedAt { get; set; }

    public virtual User Patient { get; set; } = null!;
    public virtual VaccineSchedule VaccineSchedule { get; set; } = null!;
}

public class VaccineReminderLog
{
    public int Id { get; set; }
    public int PatientVaccineRecordId { get; set; }
    public string ReminderType { get; set; } = string.Empty; // SMS, Email, Push
    public DateTime SentAt { get; set; }
    public string Status { get; set; } = "Sent"; // Sent, Failed
    public int RetryCount { get; set; } = 0;
    public string? ErrorMessage { get; set; }

    public virtual PatientVaccineRecord PatientVaccineRecord { get; set; } = null!;
}
```


### Backend API Endpoints

1. `GET /api/vaccines/schedule` - Get full configurable vaccine schedule (admin)
2. `GET /api/patients/{id}/vaccinereminders` - Get patient's vaccine due records and reminder status
3. `POST /api/patients/{id}/vaccinations` - Record vaccine administration
4. `POST /api/patients/{id}/vaccinereminders/reschedule` - Request reschedule for a vaccine due date
5. `GET /api/vaccinereminders/send` - Trigger sending reminders for upcoming vaccines (batched via scheduler)
6. `GET /api/providers/vaccinationstatus` - Provider dashboard vaccine compliance

### Frontend Components

- `VaccineScheduleViewer.tsx` – Show vaccine timeline and due vaccines
- `VaccineReminderNotifications.tsx` – Display reminders and allow rescheduling
- `VaccineAdministrationForm.tsx` – Record vaccine administration
- `AdminVaccineScheduleManager.tsx` – Manage vaccine schedule (admin only)
- `ProviderComplianceDashboard.tsx` – Overview of community vaccine compliance


### Business Logic

- Compute vaccine due dates automatically based on birth date and catch-up doses
- Generate reminders 7 days, 3 days, and 1 day before due date, with retry if failed
- Update patient vaccine record status on administration or missed doses
- Allow rescheduling with automatic date adjustment
- Notifications sent via SMS, email, and app push based on user preferences


### Security \& Authorization

- Only authorized providers and patients can view and update vaccine records
- Reminder sending APIs rate-limited and logged
- Data encrypted in transit and at rest
- Access control enforced via JWT and roles
- Compliance with Sri Lankan health data regulations and privacy laws


### Testing Requirements

- Unit and integration tests for due date calculation, reminder scheduling, rescheduling logic
- Mock notifications and scheduling services to verify reminder sends and retries
- Test edge cases: premature vaccination, missed doses, rescheduling conflicts
- Validate API input/output and authorization

***

## Coding Agent Prompt

```markdown
# Vaccine Schedule & Reminder Feature Implementation

## Objective
Implement an automated vaccine scheduling and reminder system that calculates due dates based on Sri Lanka’s EPI, manages patient vaccine records, and sends multi-channel reminders improving timeliness and completeness.

## Backend (.NET Core 8)
- Create EF Core models for VaccineSchedule, PatientVaccineRecord, and VaccineReminderLog
- Implement automatic due date calculation from date of birth and vaccination history
- Create RESTful APIs for managing vaccine schedules, patient vaccine records, and reminders
- Scheduled background job to send reminders via SMS, email, and push notifications with error handling and retry logic
- Support rescheduling requests, updating due dates, and notifying patients and providers
- Secure APIs with JWT, role validation, and data encryption

## Frontend (ReactJS + TypeScript)
- Display patient's vaccine schedule timeline and due vaccines with status
- Show reminder notifications and allow easy rescheduling requests
- Admin interface to update and manage national vaccine schedules
- Provider dashboard with vaccine compliance tracking and alerts
- Multi-language support (Sinhala, Tamil, English)
- Secure and user-friendly interface

## Testing
- Write unit tests for calculation and scheduling logic (>80% coverage)
- Integration tests for APIs and reminder workflows with mocks
- Validate secure access, input validation, and error scenarios

Deliver a production-ready, localized vaccine scheduling and reminder system integrated into the maternal health platform with configurable EPI schedules and real-time notifications to improve vaccination timeliness in Sri Lanka.
```


***

This specification incorporates the well-defined Sri Lankan EPI schedule with automated due date calculation and reminder messaging, leveraging local healthcare successes and user convenience for optimal vaccination coverage.
<span style="display:none">[^1][^10][^11][^12][^13][^14][^15][^16][^17][^18][^19][^2][^20][^3][^4][^5][^6][^7][^8][^9]</span>

<div style="text-align: center">⁂</div>

[^1]: https://www.sec.gov/Archives/edgar/data/1873093/000164117225006458/form20-f.htm

[^2]: https://www.sec.gov/Archives/edgar/data/2020737/000164117225025114/forms-1.htm

[^3]: https://www.sec.gov/Archives/edgar/data/1303523/000130352325000024/a2024fyara-form6xk.htm

[^4]: https://www.sec.gov/Archives/edgar/data/1381640/000119312525059759/d894115d20f.htm

[^5]: https://www.sec.gov/Archives/edgar/data/1159508/000115950825000023/db202503146k.htm

[^6]: https://www.sec.gov/Archives/edgar/data/217410/000021741025000017/a20-f2024x6k.htm

[^7]: https://www.sec.gov/Archives/edgar/data/1303523/000130352325000021/bti-20241231.htm

[^8]: https://medicine.kln.ac.lk/depts/publichealth/Fixed_Learning/Immunization/Immunization%20Hand%20Book/Immunization%20Handbook.pdf

[^9]: https://slma.lk/wp-content/uploads/2014/12/Guidelines-and-information-on-vaccines.pdf

[^10]: https://medicine.kln.ac.lk/depts/publichealth/Fixed_Learning/Immunization/EPI%20Shedule/EPI%20Shedule.pdf

[^11]: https://www.adb.org/sites/default/files/publication/27922/natl-immunization.pdf

[^12]: https://www.epid.gov.lk/storage/post/pdfs/en_6403b42a75fa4_Doc2.pdf

[^13]: https://www.who.int/publications/i/item/sri-lanka-epi-factsheet-2024

[^14]: https://www.epid.gov.lk/immunization-programme-implementation/immunization-programme-implementation

[^15]: https://www.who.int/publications/i/item/Sri-Lanka-EPI-Factsheet-2023

[^16]: https://www.fondation-merieux.org/wp-content/uploads/2017/10/vaccinology-2017-deepa-gamage.pdf

[^17]: https://jccpsl.sljol.info/article/10.4038/jccpsl.v26i3.8256/

[^18]: https://academic.oup.com/heapol/article/39/Supplement_1/i33/7578679

[^19]: https://account.sljch.sljol.info/index.php/sljo-j-sljch/article/view/11311

[^20]: https://medcraveonline.com/MOJPH/immunization-trends-in-sri-lanka-when-the-economic-transition-begins.html

